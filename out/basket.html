<!DOCTYPE html>



<html lang="en">

  <head>

<meta charset="UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="/styles/main.css" rel="stylesheet" />

<link rel="preconnect" href="https://fonts.googleapis.com" />

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />

<link

  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap"

  rel="stylesheet"

/>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <title>Movie Rentals</title>

  </head>



  <body>



    <header>

<meta charset="UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="/styles/main.css" rel="stylesheet" />

<link rel="preconnect" href="https://fonts.googleapis.com" />

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />

<link

  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap"

  rel="stylesheet"

/>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>


    </header>



 <nav class="navbar navbar-static-top navbar-expand-lg navbar-light bg-light">

    <div class="container-fluid ">

        <a class="navbar-brand" href="/shop.html">Movie Rentals</a>

        <ul class="navbar-nav mr-auto">



            <li class="nav-item">

                <a class="nav-link"  href="/basket.html">Basket (<span id="totalItems"></span>) <i class="bi bi-basket"></i></a>

            </li>

            <li class="nav-item">

                <a class="nav-link" href="/login.html">Log Out</a>

            </li>

        </ul>

    </div>

  </nav>



<script>

    function reloadBasket() {

        var totalItems = JSON.parse(localStorage.getItem("basket") ?? "[]").length;

        document.getElementById('totalItems').innerHTML = totalItems;

    }

    reloadBasket();

</script>


    <div class="container-fluid">

      <div class="row">

        <div class="col-8">

            <h1 style="text-align: center">Basket</h1>



            <div>

            <table style="width: 100%">

                <tr>

                    <th> Details </th>

                    <th> Quantity </th>

                    <th> Price </th>

                </tr>

                <tbody id="basket"></tbody>



              </table>



              <hr />



              <a class="btn btn-secondary" href="/shop.html">Continue Shopping</a>



              <button class="btn btn-danger" onclick="localStorage.setItem('basket', '[]');location.reload()">Clear Basket</button>

            </div>

        </div>



        <div id="basket-sidebar" class="col-4">

            <h2>Order Summary</h2>

            <table style="width: 100%">



            <tbody id="total"></tbody>



          </table>

          <div>

              <div style="text-align: right"><strong>Total Price:</strong> £<span id="total-price"></span></div>

              <a class="btn btn-primary" style="width: 100%" href="/order.html">Pay</a>

          </div>

        </div>



      </div>



    </div>



  </body>







  <script src="./js/movies.js"></script>



  <script>



    const basketContainer = document.getElementById("basket");

    const totalContainer = document.getElementById("total");







    const basket = JSON.parse(localStorage.getItem("basket") ?? "[]");







    let totalPrice = 0.0;







    basket.forEach((basketItem) => {

      var cost = basketItem.price * basketItem.rentDays;



      totalContainer.insertAdjacentHTML(

        "beforeend",

        `

            <tr>



                <td>${basketItem.name}</td>



                <td>£${Math.round(cost*100) / 100}</td>



            </tr>

        `

      );

      basketContainer.insertAdjacentHTML(

        "beforeend",

        `

            <tr>



                <td>

                    <img style="display: inline" width="10%" src="${basketItem.image}"></img>

                    <p style="display: inline">${basketItem.name}</p>

                <td>

                <td>${basketItem.rentDays}</td>



                <td>£${Math.round(cost*100) / 100}</td>



            </tr>

        `

      );

      totalPrice += basketItem.price * basketItem.rentDays;



    });







    document.getElementById("total-price").textContent = Math.round((totalPrice * 1.2)*100)/100;



  </script>



</html>



